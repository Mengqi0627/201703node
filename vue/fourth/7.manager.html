<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.css">
</head>
<body>
<div id="app">
    <div class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand">用户管理</a>
            </div>
            <!--如果用户登录过  显示 首页 个人信息 退出-->
            <!--如果没有登录过 只能看到首页和登录 强行访问个人信息 跳转到登录页 -->
            <!--从localStorage 如果有login并且为true 我认为登录过-->
            <ul class="nav navbar-nav">
                <li><router-link to="/home">首页</router-link></li>
                <li v-show="!login"> <router-link to="/login">登录</router-link></li>
                <li v-show="login">
                    <router-link to="/profile">个人信息</router-link>
                </li>
                <li v-show="login"><a href="">退出</a></li>
            </ul>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <router-view></router-view>
            </div>
        </div>
    </div>
</div>
<script src="node_modules/vue/dist/vue.js"></script>
<script src="node_modules/vue-router/dist/vue-router.js"></script>
<template id="login">
    <div>登录页</div>
</template>
<template id="home">
    <div>首页
        <slider :data="imgArrs"></slider>
    </div>
</template>
<template id="slider">
    <div class="slider">
        <img :src="data[index]" alt="">
        <div class="slider-btn">
            <span @click="go(prev)">&lt;</span>
            <span @click="go(next)">&gt;</span>
        </div>
        <div class="slider-mask">
            <span v-for="(dot,index) in data" @click="go(index)">{{index+1}}</span>
        </div>
    </div>
</template>
<style>
    .slider{width: 520px;height: 280px;position: relative}
    .slider-btn span{position: absolute;width: 30px;height:60px;top:110px;background: #fff;line-height: 60px;text-align: center }
    .slider-btn span:nth-child(1){left: 10px}
    .slider-btn span:nth-child(2){right: 10px}
    .slider-mask{background: rgba(0,0,0,.4);position: absolute;bottom: 0;left: 0;width: 100%;height: 40px;line-height: 40px;color:#fff;text-align: right;}
    .slider-mask span{padding:0 10px;cursor: pointer}
</style>
<template id="profile">
    <div>个人中心</div>
</template>
<script>
    let slider = {
        template:'#slider',
        computed:{
            prev(){
                let p = this.index - 1;
                if(p === -1){
                    p = this.data.length-1;
                }
                return p;
            },
            next(){
                let n = this.index + 1;
                if(n === this.data.length){
                    n = 0;
                }
                return n;
            },
        },
        data(){
            return {index:0}
        },
        methods:{
          go(i){
              this.index = i;
          }
        },
        props: ['data']//data就会挂在在slider的实例上
    };
    let Home  = {
        template:'#home',
        data(){
            return {imgArrs:['1.jpg','2.jpg','3.jpg']}
        },
        components:{
            slider
        }
    };
    let Login  = {
        template:'#login'
    };
    let Profile = {template:'#profile'}
    let routes = [
        {path:'/home',component:Home},
        {path:'/login',component:Login},
        {path:'/profile',component:Profile},
    ];
    let router = new VueRouter({
        routes
    });
    let vm = new Vue({
        el:'#app',
        router,
        data:{
          login:false
        },
        methods:{
            checkLogin(){ //检测是否登录
               let flag = localStorage.getItem('login')||'';
               if(flag === 'true'){
                   this.login = true;
               }else{
                   this.login = false;
               }
               alert(this.login)
            }
        },
        created(){
            //检查是否登录
            this.checkLogin();
        }
    })
</script>
</body>
</html>